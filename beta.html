<!doctype html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Cyber Music Studio (beta)</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="Severák's Cyber Music Studio" />
	<meta property="og:image" content="https://severak.github.io/cyber-music-studio/img/preview.png" />
	<meta property="og:type" content="website" />
	<meta property="og:description" content="not your usual DAW" />
	<link rel="stylesheet" href="css/uboot.css">
	
	<script src="js/uboot.js"></script>
<script src="js/JZZ.js"></script>
<script src="js/JZZ.input.Kbd.js"></script>
<script src="js/JZZ.gui.Select.js"></script>
<script src="js/JZZ.synth.Severak.js"></script>
<script src="js/heartbeat.js"></script>
<style>
body {
	font-family: "Lucida Console", monospace;
	background-color: plum;
}

.ub-box {
	background-color: lightyellow;
}

button.on {
	background-color: yellow;
}
</style>

</head>
<body>

<div class="ub-container">
<h1>Cyber Music Studio <small>beta</small></h1>

<form class="ub-form">

<div class="ub-box" id="box_welcome">
<img src="img/preview.png" class="ub-fit-img">
<p>This is beta version of Cyber Music Studio. It's not finished yet and can be broken at any moment.</p>
<p>Feel free to test it and report bugs <a href="https://github.com/severak/cyber-music-studio/issues" target="_blank">here</a>.</p>
<center><button id="power"><big>OK</big></button></center>
</div>
<br><br>

<div class="ub-box ub-hidden" id="box_traveller">

<div class="ub-cols">
<div class="ub-same">
<h2>traveller</h2>
</div>
<div style="text-align: right;" class="ub-same">
<small>flexible monosynth</small>
</div>
</div>

<div class="ub-cols">
<div class="ub-same">
vol <input type="range" min="0" max="0.5" step="0.01" value="0.25" id="vol">
</div>
<div class="ub-same">
waveform:
<select id="wave">
<option name="sine">sine</option>
<option name="triangle">triangle</option>
<option name="square">square</option>
<option name="sawtooth" selected>sawtooth</option>
<option name="arp" disabled>arp</option>
<option name="pwm" disabled>pwm</option>
<option name="noise" disabled>noise</option>
<option name="tonal noise" disabled>tonal noise</option>
</select>
</div>
<div class="ub-same">
attack
<input type="range" min="0.01" max="1" step="0.1" value="0.2" id="attack">
</div>
<div class="ub-same">
decay
<input type="range" min="0.01" max="1" step="0.1" value="0.5" id="decay">
</div>
</div>

<div class="ub-cols">
<div class="ub-same">
<label><input type="checkbox" id="hold" checked> hold</label>
</div>
<div class="ub-same">
<label><input type="checkbox" id="bite"> bite</label>
</div>
<div class="ub-same">
<label><input type="checkbox" id="quack"> quack</label>
</div>
</div>

<div class="ub-cols">
<div class="ub-same">
TRAVELLER
<input type="range" min="0" max="22000" value="22000" id="traveller">
</div>
</div>

<div class="ub-cols">
<div class="ub-same"  style="text-align: center">
<div id="keyboard"></div>
</div>
</div>

<div class="ub-cols">
<div class="ub-same" style="text-align: center">
MIDI input: <select id="select_midi_in"></select> <!-- | <button id="record">record</button> -->
</div>
</div>

</div>

<br><br>

<div class="ub-box ub-hidden" style="background-color: coral;">

<div class="ub-cols">
<div class="ub-same">
<h2>analog nomad</h2>
</div>
<div style="text-align: right;" class="ub-same">
<button id="power2">⏻ (power)</button>
</div>
</div>

<div class="ub-cols">
<div class="ub-same">
pulse <input type="range" min="0" max="0.3" step="0.01" value="0.25" id="pulse">
</div>
<div class="ub-same">
saw <input type="range" min="0" max="0.3" step="0.01" value="0.25" id="saw">
</div>
<div class="ub-same">
sub <input type="range" min="0" max="0.3" step="0.1" value="0.25" id="sub">
</div>
<div class="ub-same">
noise <input type="range" min="0" max="0.3" step="0.1" value="0.25" id="noise">
</div>
</div>

<div class="ub-cols">
<div class="ub-same">
A <input type="range" min="0.01" max="1" step="0.01" value="0.01" id="A">
</div>
<div class="ub-same">
D <input type="range" min="0.01" max="1" step="0.01" value="0.25" id="D">
</div>
<div class="ub-same">
S <input type="range" min="0" max="1" step="0.1" value="0.8" id="S">
</div>
<div class="ub-same">
R <input type="range" min="0.01" max="1" step="0.1" value="0.5" id="R">
</div>
</div>

<div class="ub-cols">
<div class="ub-same">
PW <input type="range" min="0.01" max="1" step="0.01" value="0.01" id="A">
</div>
<div class="ub-same">
angle <input type="range" min="0.01" max="1" step="0.01" value="0.25" id="D">
</div>
<div class="ub-same">
detune <input type="range" min="0" max="1" step="0.1" value="0.8" id="S">
</div>
<div class="ub-same">
R <input type="range" min="0.01" max="1" step="0.1" value="0.5" id="R">
</div>
</div>


<div class="ub-cols">
<div class="ub-same">
<label><input type="checkbox" id="hold2" checked> hold</label>
</div>
<div class="ub-same">
<label><input type="checkbox" id="bite2"> bite</label>
</div>
<div class="ub-same">
<label><input type="checkbox" id="quack2"> quack</label>
</div>
</div>

<div class="ub-cols">
<div class="ub-same">
TRAVELLER
<input type="range" min="0" max="22000" value="22000" id="traveller2">
</div>
</div>

<div class="ub-cols">
<div class="ub-same"  style="text-align: center">
<div id="keyboard2"></div>
</div>
</div>

<div class="ub-cols">
<div class="ub-same" style="text-align: center">
MIDI input: <select id="select_midi_in2"></select> <!-- | <button id="record" disabled>record</button> -->
</div>
</div>

</div>



</form>


<script>

var kbd = JZZ.input.Kbd({ at:'keyboard', pos:'N', wl: 50, ww:21, bl: 25, bw:12, from:'F4', to:'C7' });

var midiIn = JZZ.gui.SelectMidiIn({ at: 'select_midi_in' });

midiIn.onSelect = function(name) {
  console.log('MIDI-In selected:', name);
 midiIn.connect(kbd);
};

var kbd2 = JZZ.input.Kbd({ at:'keyboard2', pos:'N', wl: 50, ww:21, bl: 25, bw:12, from:'F4', to:'C7' });

var midiIn2 = JZZ.gui.SelectMidiIn({ at: 'select_midi_in2' });

midiIn2.onSelect = function(name) {
  console.log('MIDI-In selected:', name);
 midiIn2.connect(kbd2);
};

ub.on("power","click",  function(ev){
	ub.stop(ev);
	ub.addClass("box_welcome", 'ub-hidden');
	ub.delClass("box_traveller", 'ub-hidden');
	
	hb.start();
	
	window.traveller = hb.Traveller();
	traveller.noteOn(60);
	setTimeout(function() {traveller.noteOff(60);}, 500);
	
	hb.chnget(traveller, "vol");
	hb.chnget(traveller, "wave");
	hb.chnget(traveller, "attack");
	hb.chnget(traveller, "decay");
	hb.chnget(traveller, "hold");
	hb.chnget(traveller, "bite");
	hb.chnget(traveller, "quack");
	hb.chnget(traveller, "traveller");
	
	wrap = JZZ.synth.Severak();
	wrap.setSynth(traveller);
	kbd.connect(wrap);
});
</script>

</div>

</body>
</html>
